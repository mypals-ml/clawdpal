# Instructions for OpenClaw on Docker Linux By Sh (Plan B)

## Prerequisites
Log into the Ubuntu Linux container.

## Step 1: Prepare the Linux Environment for OpenClaw
Inside the container's shell (from Step 2.4), set up dependencies.

1. Update package lists and install `curl`:
   ```
   apt update
   apt install -y curl
   ```

## Step 2: Install OpenClaw
Inside the container's shell (from Step 2.4):

1. Run:
   ```
   curl -fsSL https://openclaw.ai/install.sh | bash
   ```
2. When `OpenClaw onboarding` started, most of the options should be left as default, except:
    - â—‡  Onboarding mode
      â”‚  Manual

    - â—‡  What do you want to set up?
      â”‚  Local gateway (this machine)

    - Input API key
    - â—‡  Gateway bind
      â”‚  LAN (0.0.0.0)

    - â—‡  Configure chat channels now?
      â”‚  Yes

    - â—‡  Select a channel
      â”‚  Telegram (Bot API)
        - Note: To Get a Telegram Bot Token, see MB900

    - â—‡  Select a channel
      â”‚  Finished

    - â—‡  Configure skills now? (recommended)
      â”‚  Skip

    - â—‡  Enable hooks?
      â”‚  ğŸš€ boot-md, ğŸ“ command-logger, ğŸ’¾ session-memory

    - You may see the error messages below. Ignore them by now.

      â—‡  Systemd â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
      â”‚                                                                                         â”‚
      â”‚  Systemd user services are unavailable. Skipping lingering checks and service install.  â”‚
      â”‚                                                                                         â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
      â”‚
      â—‡  
      Health check failed: gateway closed (1006 abnormal closure (no close frame)): no close reason
      Gateway target: ws://172.17.0.2:18789
      Source: local lan 172.17.0.2
      Config: /root/.openclaw/openclaw.json
      Bind: lan
      â”‚
      â—‡  Health check help â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
      â”‚                                                    â”‚
      â”‚  Docs:                                             â”‚
      â”‚  https://docs.openclaw.ai/gateway/health           â”‚
      â”‚  https://docs.openclaw.ai/gateway/troubleshooting  â”‚
      â”‚                                                    â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
      Missing Control UI assets. Build them with `pnpm ui:build` (auto-installs UI deps).

    - You will see the messages below. Copy and save them for later use.

      â—‡  Control UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
      â”‚                                                                                            â”‚
      â”‚  Web UI: http://172.17.0.2:18789/                                                          â”‚
      â”‚  Web UI (with token):                                                                      â”‚
      â”‚  http://172.17.0.2:18789/#token=xxxxxxxxxx                                                 â”‚
      â”‚  Gateway WS: ws://172.17.0.2:18789                                                         â”‚
      â”‚  Gateway: not detected (gateway closed (1006 abnormal closure (no close frame)): no close  â”‚
      â”‚  reason)                                                                                   â”‚
      â”‚  Docs: https://docs.openclaw.ai/web/control-ui                                             â”‚
      â”‚                                                                                            â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

    - â—‡  Enable zsh shell completion for openclaw?
      â”‚  Yes

    - You will see the messages below. Copy and save them for later use.

      â—‡  Dashboard ready â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
      â”‚                                                                                   â”‚
      â”‚  Dashboard link (with token):                                                     â”‚
      â”‚  http://172.17.0.2:18789/#token=xxxxxxxxxx                                        â”‚
      â”‚  Copy/paste this URL in a browser on this machine to control OpenClaw.            â”‚
      â”‚  No GUI detected. Open from your computer:                                        â”‚
      â”‚  ssh -N -L 18789:127.0.0.1:18789 user@<host>                                      â”‚
      â”‚  Then open:                                                                       â”‚
      â”‚  http://localhost:18789/                                                          â”‚
      â”‚  http://localhost:18789/#token=xxxxxxxxxx                                         â”‚
      â”‚  Docs:                                                                            â”‚
      â”‚  https://docs.openclaw.ai/gateway/remote                                          â”‚
      â”‚  https://docs.openclaw.ai/web/control-ui                                          â”‚
      â”‚                                                                                   â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

## Step 3: Re-Connect to Linux Before Fix Errors or Miss Configurations
The above setup contains the bellow errors and miss configs:
- Missing Control UI assets
- Openclawd can't be accessed from the host macOS
- Systemd user services are unavailable. Skipping lingering checks and service install.
  We will re-connect to the linux by Zsh first

1. Install Zsh inside the container (Recommended)
    - Ctrl+C to go back to the command line
    - Install Zsh: `apt update && apt install zsh -y`
    - `exit` to go back to host (macOS)
2. Connect to linux using zsh
    - Use this command to connect into linux again:
      ```
      docker exec -it linux-clawdpal /bin/zsh
      ```
## Stpe 4: Fixing the `Missing Control UI assets` error first
1. Install pnpm: `npm install -g pnpm`

2. Go to the current user home: `cd ~`
    - check: run `pwd`.
    - get result: `/root`
    - :
3. Clone Openclaw Cource and Build:
   ```
   git clone https://github.com/openclaw/openclaw.git
   cd openclaw
   pnpm install
   pnpm ui:build
   pnpm build
   ```
4. Finalize Onboarding (Optional):
    - If you need to verify your settings or complete any skipped steps from the previous wizard session, run the onboarding command again from within your source directory. This helps configure your workspace, channels, and skills
    - Run: `pnpm openclaw onboard`
5. **Start the Gateway**:
    - Terminate Onboard program: CTRL+C
    - Run `openclaw gateway --port 18789 --verbose`

## Stpe 5: Fixing the `Openclawd can't be accessed from the host macOS`
- In browser, when access the address: http://localhost:18789/#token=xxxxxxxxxx, the web page will show error:
    ```properties
    disconnected (1008): pairing required
    ```
- Connect to container from macOS with a new terminal:
  - Run: `docker exec -it linux-clawdpal /bin/zsh`
- Copy the config json:
    ```
    # copy to shared dir
    cp ~/.openclaw/openclaw.json /shared
    ```
- Edit `openclaw.json` in `~/shared-clawdpal` on macOS.
  - Add this under the "gateway" section 
    ```
        "controlUi": {
        "allowInsecureAuth": true
      },
    ```
- Save
- In Docker container
  - Run `cp /shared/openclaw.json ~/.openclaw`
  - In the previous terminal
    - Stop the gateway program by CTRL+C
    - Run it again: `openclaw gateway --port 18789 --verbose`
- In browser, access the address: http://localhost:18789/#token=xxxxxxxxxx again, and the error should be gone.

## Step 3: Configure OpenClaw for macOS Shared Folder Access
OpenClaw's file operations plugin should now access `/shared` inside the container, which maps to `~/shared-clawdpal` on macOS.

1. In OpenClaw config (e.g., plugins section):
    - Enable the file management skill/plugin.
    - Set paths to include `/shared` for read/write operations.

2. Test access:
    - From OpenClaw interface or test script: Try reading/writing a file in `/shared`.
    - Example (assuming OpenClaw has a command): "Write 'Hello from OpenClaw' to /shared/test.txt".
    - Verify on macOS: Check `~/shared-clawdpal/test.txt`.

## Step 4: Managing the Setup
- Stop the container: `docker stop linux-clawdpal`.
- Start again: `docker start linux-clawdpal` then `docker exec -it linux-clawdpal /bin/bash`.
- Remove (if needed): `docker rm linux-clawdpal`.
- For persistence: Commit changes to a new image (`docker commit linux-clawdpal my-openclaw-image`) or use a Dockerfile for reproducibility.

## Troubleshooting
- **Permissions issues:** Ensure the shared folder has read/write permissions on macOS (`chmod -R 777 ~/shared-clawdpal` â€“ use cautiously).
- **Docker not running:** Restart Docker Desktop.
- **OpenClaw errors:** Check logs, refer to https://docs.openclaw.ai/troubleshooting.

For updates, check the official OpenClaw GitHub (https://github.com/openclaw/openclaw) as of February 2026.

This setup ensures a full-function OpenClaw with shared folder access, running in a Dockerized Linux on macOS.





## Stpe 1: Build Openclaw and Onboarding
1. Clone Openclaw Source Code:
   ```
   git clone https://github.com/openclaw/openclaw.git
   cd openclaw
   ```
2. Install nodejs v22 (npm bundled)
    ```
    apt remove --purge nodejs -y
    apt remove --purge npm -y
    apt autoremove -y

    # 1. Update and install prerequisites
    apt update
    apt install -y ca-certificates curl gnupg

    # 2. Add NodeSource GPG key
    mkdir -p /etc/apt/keyrings
    curl -fsSL https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | gpg --dearmor -o /etc/apt/keyrings/nodesource.gpg
    
    # 3. Add Node.js 22.x repo
    echo "deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node_22.x nodistro main" > /etc/apt/sources.list.d/nodesource.list
    
    # 4. Refresh and install
    apt update
    apt install -y nodejs
    
    # 5. Verify
    node -v
    pm -v
    ```

3. Install pnpm:
   ```
   corepack enable pnpm
   corepack prepare pnpm@latest --activate
   # Verify
   pnpm --version
   ```

   # nodejs should show v20.x.x
3. Build the UI and the Core Application: ``
   ```
   pnpm install
   pnpm build
   pnpm ui:build
   ```
## Stpe 2: Onboarding (Dev Mode):
Run: `pnpm openclaw onboard --install-daemon`
When `OpenClaw onboarding` started, most of the options should be left as default, except: 
   - â—‡  Onboarding mode
     â”‚  Manual
   
   - â—‡  What do you want to set up?
     â”‚  Local gateway (this machine)

   - Input API key
   - â—‡  Gateway bind
     â”‚  LAN (0.0.0.0)

   - â—‡  Configure chat channels now?
     â”‚  Yes
   
   - â—‡  Select a channel
     â”‚  Telegram (Bot API)
     - Note: To Get a Telegram Bot Token, see MB900

   - â—‡  Select a channel
     â”‚  Finished

   - â—‡  Configure skills now? (recommended)
     â”‚  No

   - â—‡  Enable hooks?
     â”‚  ğŸš€ boot-md, ğŸ“ command-logger, ğŸ’¾ session-memory

   - You may see the error messages below. Ignore them by now.
   
       â—‡  Systemd â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
       â”‚                                                                                         â”‚
       â”‚  Systemd user services are unavailable. Skipping lingering checks and service install.  â”‚
       â”‚                                                                                         â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
       â”‚
       â—‡  
       Health check failed: gateway closed (1006 abnormal closure (no close frame)): no close reason
       Gateway target: ws://172.17.0.2:18789
       Source: local lan 172.17.0.2
       Config: /root/.openclaw/openclaw.json
       Bind: lan
       â”‚
       â—‡  Health check help â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
       â”‚                                                    â”‚
       â”‚  Docs:                                             â”‚
       â”‚  https://docs.openclaw.ai/gateway/health           â”‚
       â”‚  https://docs.openclaw.ai/gateway/troubleshooting  â”‚
       â”‚                                                    â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
       Missing Control UI assets. Build them with `pnpm ui:build` (auto-installs UI deps).

   - You will see the messages below. Copy and save them for later use.

      â—‡  Control UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
      â”‚                                                                                            â”‚
      â”‚  Web UI: http://172.17.0.2:18789/                                                          â”‚
      â”‚  Web UI (with token):                                                                      â”‚
      â”‚  http://172.17.0.2:18789/#token=xxxxxxxxxx                                                 â”‚
      â”‚  Gateway WS: ws://172.17.0.2:18789                                                         â”‚
      â”‚  Gateway: not detected (gateway closed (1006 abnormal closure (no close frame)): no close  â”‚
      â”‚  reason)                                                                                   â”‚
      â”‚  Docs: https://docs.openclaw.ai/web/control-ui                                             â”‚
      â”‚                                                                                            â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

   - â—‡  Enable zsh shell completion for openclaw?
     â”‚  Yes

   - You will see the messages below. Copy and save them for later use.

      â—‡  Dashboard ready â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
      â”‚                                                                                   â”‚
      â”‚  Dashboard link (with token):                                                     â”‚
      â”‚  http://172.17.0.2:18789/#token=xxxxxxxxxx                                        â”‚
      â”‚  Copy/paste this URL in a browser on this machine to control OpenClaw.            â”‚
      â”‚  No GUI detected. Open from your computer:                                        â”‚
      â”‚  ssh -N -L 18789:127.0.0.1:18789 user@<host>                                      â”‚
      â”‚  Then open:                                                                       â”‚
      â”‚  http://localhost:18789/                                                          â”‚
      â”‚  http://localhost:18789/#token=xxxxxxxxxx                                         â”‚
      â”‚  Docs:                                                                            â”‚
      â”‚  https://docs.openclaw.ai/gateway/remote                                          â”‚
      â”‚  https://docs.openclaw.ai/web/control-ui                                          â”‚
      â”‚                                                                                   â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

## Step 3: Re-Connect to Linux Before Fix Errors or Miss Configurations
The above setup contains the bellow errors and miss configs:
- Missing Control UI assets
- Systemd user services are unavailable. Skipping lingering checks and service install.
- Openclawd can't be accessed from the host macOS
We will re-connect to the linux by Zsh first
1. Install Zsh inside the container (Recommended)
   - Ctrl+C to go back to the command line
   - Install Zsh: `apt update && apt install zsh -y`
   - `exit` to go back to host (macOS)
2. Connect to linux using zsh
   - Use this command to connect into linux again:
     ```
     docker exec -it linux-clawdpal /bin/zsh
     ```
2. **Start the Gateway**: 

export PNPM_HOME="/root/.local/share/pnpm"

# 2. Add it to PATH (so binaries like openclaw can be found)
export PATH="$PNPM_HOME:$PATH"

# 3. (Optional but good) Make these persistent in this session/container
#    Add to your .zshrc if you want them on every shell start
echo 'export PNPM_HOME="/root/.local/share/pnpm"' >> ~/.zshrc
echo 'export PATH="$PNPM_HOME:$PATH"' >> ~/.zshrc
source ~/.zshrc

# 4. Now install the current directory (openclaw source) globally
pnpm install -g .

# 5. Verify
openclaw --version   # or openclaw --help

   - Terminate Onboard program: CTRL+C
   - Run `openclaw gateway --port 18789 --verbose`
3. 
## Step 3: Configure OpenClaw for macOS Shared Folder Access
OpenClaw's file operations plugin should now access `/shared` inside the container, which maps to `~/shared-clawdpal` on macOS.

1. In OpenClaw config (e.g., plugins section):
   - Enable the file management skill/plugin.
   - Set paths to include `/shared` for read/write operations.

2. Test access:
   - From OpenClaw interface or test script: Try reading/writing a file in `/shared`.
   - Example (assuming OpenClaw has a command): "Write 'Hello from OpenClaw' to /shared/test.txt".
   - Verify on macOS: Check `~/shared-clawdpal/test.txt`.

## Step 4: Managing the Setup
- Stop the container: `docker stop linux-clawdpal`.
- Start again: `docker start linux-clawdpal` then `docker exec -it linux-clawdpal /bin/bash`.
- Remove (if needed): `docker rm linux-clawdpal`.
- For persistence: Commit changes to a new image (`docker commit linux-clawdpal my-openclaw-image`) or use a Dockerfile for reproducibility.

## Troubleshooting
- **Permissions issues:** Ensure the shared folder has read/write permissions on macOS (`chmod -R 777 ~/shared-clawdpal` â€“ use cautiously).
- **Docker not running:** Restart Docker Desktop.
- **OpenClaw errors:** Check logs, refer to https://docs.openclaw.ai/troubleshooting.

For updates, check the official OpenClaw GitHub (https://github.com/openclaw/openclaw) as of February 2026.

This setup ensures a full-function OpenClaw with shared folder access, running in a Dockerized Linux on macOS.



